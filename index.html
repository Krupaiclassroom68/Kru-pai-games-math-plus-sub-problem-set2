<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Story Math ¬∑ Kru Pai Classroom</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      font-family: "Tahoma", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #b39ddb 0, #1a237e 55%, #0d1333 100%);
      color: #fdfdfd;
    }

    .app-container {
      width: 100%;
      max-width: 900px;
      padding: 16px;
    }

    .card {
      background: rgba(15, 22, 58, 0.9);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.45);
      border: 2px solid rgba(179, 157, 219, 0.8);
    }

    h1, h2, h3 {
      margin: 0 0 12px;
    }

    h1 {
      font-size: 1.9rem;
      text-align: center;
      color: #ffeb3b;
      text-shadow: 0 0 8px rgba(255, 235, 59, 0.7);
    }

    h2 {
      font-size: 1.3rem;
      text-align: center;
      color: #e1bee7;
    }

    .subtitle {
      text-align: center;
      font-size: 0.95rem;
      color: #c5cae9;
      margin-bottom: 18px;
    }

    .input-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 18px;
    }

    label {
      font-size: 0.95rem;
    }

    input[type="text"] {
      padding: 8px 10px;
      border-radius: 10px;
      border: none;
      min-width: 220px;
      font-size: 1rem;
      outline: none;
    }

    .part-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      margin-bottom: 18px;
    }

    .part-btn {
      border: none;
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 0.95rem;
      cursor: pointer;
      background: linear-gradient(135deg, #5c6bc0, #7e57c2);
      color: #fff;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.35);
      transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.15s;
      opacity: 0.85;
    }

    .part-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.45);
      opacity: 1;
    }

    .part-btn.active {
      border: 2px solid #ffeb3b;
      box-shadow: 0 0 14px rgba(255, 235, 59, 0.7);
      opacity: 1;
    }

    .primary-btn {
      display: block;
      margin: 0 auto;
      margin-top: 8px;
      border: none;
      border-radius: 999px;
      padding: 10px 26px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      background: linear-gradient(135deg, #ffca28, #ff8f00);
      color: #212121;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
      transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.15s;
    }

    .primary-btn:disabled {
      opacity: 0.5;
      cursor: default;
      box-shadow: none;
    }

    .primary-btn:hover:not(:disabled) {
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.55);
    }

    .small-btn {
      border-radius: 999px;
      border: none;
      padding: 6px 16px;
      font-size: 0.85rem;
      cursor: pointer;
      background: #3949ab;
      color: #fff;
      margin-right: 6px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.4);
    }

    .top-bar {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 8px;
      font-size: 0.9rem;
      margin-bottom: 10px;
      align-items: center;
    }

    .tag {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(63, 81, 181, 0.8);
      color: #e8eaf6;
    }

    .score-tag {
      background: rgba(233, 30, 99, 0.85);
    }

    .name-tag {
      background: rgba(0, 188, 212, 0.85);
    }

    .question-box {
      background: rgba(26, 35, 126, 0.9);
      border-radius: 14px;
      padding: 12px 14px;
      margin-bottom: 12px;
      border: 1px solid rgba(187, 134, 252, 0.7);
      font-size: 1.05rem;
      line-height: 1.5;
      white-space: normal;
    }

    .equation-area {
      margin: 14px 0;
    }

    .equation-row {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 10px;
      margin: 6px 0;
      flex-wrap: wrap;
    }

    .equation-line-label {
      min-width: 200px;
      text-align: right;
      font-size: 0.95rem;
      color: #e1bee7;
    }

    .equation-line-slots {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    .square-slot,
    .square-slot.answer-slot {
      width: 62px;
      height: 62px;
      border-radius: 12px;
      border: 3px solid #7e57c2;
      background: #f5f5ff;
      color: #1a237e;
      font-size: 1.3rem;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.35);
    }

    .square-slot.answer-slot {
      border-color: #ffca28;
      background: #fff8e1;
    }

    .circle-slot {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      border: 3px solid #42a5f5;
      background: #e3f2fd;
      color: #0d47a1;
      font-size: 1.6rem;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.35);
    }

    .slot-label {
      font-size: 1.4rem;
      padding: 0 6px;
    }

    .slot.selected {
      box-shadow: 0 0 0 3px rgba(255, 235, 59, 0.9);
    }

    .slot.disabled {
      opacity: 0.7;
      cursor: default;
    }

    .keypad {
      margin-top: 8px;
      background: rgba(26, 35, 126, 0.9);
      border-radius: 14px;
      padding: 10px;
      border: 1px solid rgba(100, 181, 246, 0.7);
    }

    .keypad-row {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 6px;
      flex-wrap: wrap;
    }

    .key-btn {
      min-width: 48px;
      padding: 10px 0;
      border-radius: 12px;
      border: none;
      background: #5c6bc0;
      color: #fff;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.4);
      transition: transform 0.05s ease, box-shadow 0.05s ease;
    }

    .key-btn.op {
      background: #26c6da;
      color: #00363a;
    }

    .key-btn.special {
      background: #ab47bc;
      font-size: 0.9rem;
      padding: 8px 6px;
    }

    .key-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    }

    .bottom-controls {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
    }

    .msg-area {
      min-height: 32px;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .emoji {
      font-size: 1.4rem;
    }

    .btn-group-right {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    #check-btn {
      background: linear-gradient(135deg, #00e676, #00c853);
      font-size: 1rem;
      font-weight: bold;
      padding: 10px 22px;
      min-width: 135px;
    }

    #next-btn {
      background: #ff9800;
    }

    #back-home-btn {
      background: #3949ab;
    }

    .confetti-piece {
      position: fixed;
      width: 10px;
      height: 14px;
      background: #ffeb3b;
      border-radius: 2px;
      opacity: 0.9;
      pointer-events: none;
      animation: confetti-fall 1.4s linear forwards;
      z-index: 9999;
    }

    @keyframes confetti-fall {
      0% {
        transform: translate3d(var(--x-start), -60px, 0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translate3d(var(--x-end), 110vh, 0) rotate(340deg);
        opacity: 0;
      }
    }

    @media (max-width: 600px) {
      .square-slot,
      .square-slot.answer-slot {
        width: 54px;
        height: 54px;
        font-size: 1.1rem;
      }

      .circle-slot {
        width: 50px;
        height: 50px;
        font-size: 1.4rem;
      }

      .card {
        padding: 16px;
      }

      h1 {
        font-size: 1.6rem;
      }

      .question-box {
        font-size: 1rem;
      }

      .equation-line-label {
        min-width: 160px;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- START SCREEN -->
    <div id="start-screen" class="card">
      <h1>Story Math ¬∑ ‡∏ö‡∏ß‡∏Å‚Äì‡∏•‡∏ö‡∏à‡∏≤‡∏Å‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</h1>
      <h2>Kru Pai Classroom</h2>
      <p class="subtitle">
        ‡πÉ‡∏´‡πâ‡πÄ‡∏î‡πá‡∏Å‡∏≠‡πà‡∏≤‡∏ô‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á<br />
        ‡∏ä‡πà‡∏≠‡∏á‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏° = ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô, ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡∏á‡∏Å‡∏•‡∏° = ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ + ‡∏´‡∏£‡∏∑‡∏≠ -
      </p>

      <div class="input-row">
        <div>
          <label for="student-name">‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô :</label><br />
          <input id="student-name" type="text" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏à‡πâ‡∏≤" />
        </div>
      </div>

      <h3 style="text-align:center; margin-bottom:8px;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Part ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å</h3>
      <div class="part-buttons">
        <button class="part-btn" data-part="A">
          Part A ¬∑ ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ (‡πÉ‡∏ä‡πâ +)
        </button>
        <button class="part-btn" data-part="B">
          Part B ¬∑ ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ (‡πÉ‡∏ä‡πâ -)
        </button>
        <button class="part-btn" data-part="C">
          Part C ¬∑ ‡∏ú‡∏™‡∏° ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤/‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤
        </button>
        <button class="part-btn" data-part="D">
          Part D ¬∑ ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏™‡∏≠‡∏á‡∏ä‡∏±‡πâ‡∏ô (3 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
        </button>
      </div>

      <button id="start-btn" class="primary-btn" disabled>
        ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
      </button>

      <p style="text-align:center; margin-top:12px; font-size:0.85rem; color:#c5cae9;">
        * ‡πÄ‡∏Å‡∏°‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡πá‡∏Å‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏ï‡πâ‡∏ô ‡πÄ‡∏ô‡πâ‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á<br />
        ‚Äú‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ / ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ / ‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‚Äù ‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏á‡πà‡∏≤‡∏¢
      </p>
    </div>

    <!-- GAME SCREEN -->
    <div id="game-screen" class="card" style="display:none;">
      <div class="top-bar">
        <div class="tag name-tag" id="name-display">üëß ‡∏ä‡∏∑‡πà‡∏≠: -</div>
        <div class="tag" id="part-display">Part -</div>
        <div class="tag score-tag" id="score-display">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: 0/0</div>
      </div>

      <div class="question-box" id="question-text">
        <!-- ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
      </div>

      <div class="equation-area" id="equation-area">
        <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏™‡∏°‡∏Å‡∏≤‡∏£ / ‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î ‡∏à‡∏∞‡πÅ‡∏ó‡∏£‡∏Å‡∏î‡πâ‡∏ß‡∏¢ JS -->
      </div>

      <div class="keypad">
        <div class="keypad-row">
          <button class="key-btn" data-key="7">7</button>
          <button class="key-btn" data-key="8">8</button>
          <button class="key-btn" data-key="9">9</button>
        </div>
        <div class="keypad-row">
          <button class="key-btn" data-key="4">4</button>
          <button class="key-btn" data-key="5">5</button>
          <button class="key-btn" data-key="6">6</button>
        </div>
        <div class="keypad-row">
          <button class="key-btn" data-key="1">1</button>
          <button class="key-btn" data-key="2">2</button>
          <button class="key-btn" data-key="3">3</button>
        </div>
        <div class="keypad-row">
          <button class="key-btn" data-key="0">0</button>
          <button class="key-btn op" data-key="+">+</button>
          <button class="key-btn op" data-key="-">-</button>
        </div>
        <div class="keypad-row">
          <button class="key-btn special" id="clear-slot">‡∏•‡∏ö‡∏ä‡πà‡∏≠‡∏á</button>
          <button class="key-btn special" id="clear-all">‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏°‡∏Å‡∏≤‡∏£</button>
        </div>
      </div>

      <div class="bottom-controls">
        <div class="msg-area" id="message-area">
          <!-- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° + ‡∏≠‡∏¥‡πÇ‡∏°‡∏à‡∏¥ -->
        </div>
        <div class="btn-group-right">
          <button class="small-btn" id="back-home-btn">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
          <button class="small-btn" id="check-btn">‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
          <button class="small-btn" id="next-btn">‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --------- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏∏‡πà‡∏° ----------
    let audioCtx = null;
    function playClickSound(pitch = 660, duration = 0.07) {
      try {
        if (!audioCtx) {
          const AC = window.AudioContext || window.webkitAudioContext;
          if (!AC) return;
          audioCtx = new AC();
        }
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = "sine";
        osc.frequency.value = pitch;
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        const now = audioCtx.currentTime;
        gain.gain.setValueAtTime(0.15, now);
        gain.gain.exponentialRampToValueAtTime(0.001, now + duration);
        osc.start(now);
        osc.stop(now + duration);
      } catch (e) {
        // ‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡πÑ‡∏õ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
      }
    }

    // ---------- Data Helper ----------
    // simpleEq: ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ type "eq" ‡πÅ‡∏•‡πâ‡∏ß ‡∏°‡∏µ‡πÅ‡∏Ñ‡πà num, op, ans
    function simpleEq(num1, op, num2, ans) {
      return [
        { type: "num", correct: num1 },
        { type: "op", correct: op },
        { type: "num", correct: num2 },
        { type: "ans", correct: ans }
      ];
    }

    // -------------------------
    // DATA: Questions
    // -------------------------
    const questionsByPart = {
      A: [
        {
          story: "‡πÅ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏°‡∏ß 18 ‡∏ï‡∏±‡∏ß ‡πÅ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÅ‡∏°‡∏ß 7 ‡∏ï‡∏±‡∏ß ‡πÅ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß?",
          eqLabel: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏Ç‡∏≠‡∏á‡πÅ‡∏°‡πà =",
          slots: simpleEq(18, "+", 7, 25)
        },
        {
          story: "‡πÉ‡∏ô‡∏Å‡∏£‡∏á‡∏°‡∏µ‡∏ô‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å 15 ‡∏ï‡∏±‡∏ß ‡∏ô‡∏Å‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å 5 ‡∏ï‡∏±‡∏ß ‡∏ô‡∏Å‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß?",
          eqLabel: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏Å‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏ç‡πà =",
          slots: simpleEq(15, "+", 5, 20)
        },
        {
          story: "‡∏´‡πâ‡∏≠‡∏á ‡∏õ.2/1 ‡∏°‡∏µ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á 16 ‡∏Ñ‡∏ô ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á 4 ‡∏Ñ‡∏ô ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏Ñ‡∏ô?",
          eqLabel: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á =",
          slots: simpleEq(16, "+", 4, 20)
        },
        {
          story: "‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏ô‡∏°‡∏°‡∏µ‡πÇ‡∏î‡∏ô‡∏±‡∏ó 12 ‡∏ä‡∏¥‡πâ‡∏ô ‡πÄ‡∏Ñ‡πâ‡∏Å‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÇ‡∏î‡∏ô‡∏±‡∏ó 9 ‡∏ä‡∏¥‡πâ‡∏ô ‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏ô‡∏°‡∏°‡∏µ‡πÄ‡∏Ñ‡πâ‡∏Å‡∏Å‡∏µ‡πà‡∏ä‡∏¥‡πâ‡∏ô?",
          eqLabel: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Ñ‡πâ‡∏Å =",
          slots: simpleEq(12, "+", 9, 21)
        },
        {
          story: "‡πÉ‡∏ô‡∏™‡∏ß‡∏ô‡∏°‡∏µ‡∏ï‡πâ‡∏ô‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á 20 ‡∏ï‡πâ‡∏ô ‡∏ï‡πâ‡∏ô‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏ô‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á 6 ‡∏ï‡πâ‡∏ô ‡∏°‡∏µ‡∏ï‡πâ‡∏ô‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß‡∏Å‡∏µ‡πà‡∏ï‡πâ‡∏ô?",
          eqLabel: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πâ‡∏ô‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß =",
          slots: simpleEq(20, "+", 6, 26)
        },
        {
          story: "‡∏ï‡πâ‡∏ô‡∏°‡∏µ‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏£‡∏π‡∏õ‡∏î‡∏≤‡∏ß 14 ‡πÅ‡∏ú‡πà‡∏ô ‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏£‡∏π‡∏õ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏£‡∏π‡∏õ‡∏î‡∏≤‡∏ß 8 ‡πÅ‡∏ú‡πà‡∏ô ‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏£‡∏π‡∏õ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏°‡∏µ‡∏Å‡∏µ‡πà‡πÅ‡∏ú‡πà‡∏ô?",
          eqLabel: "‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏£‡∏π‡∏õ‡∏´‡∏±‡∏ß‡πÉ‡∏à =",
          slots: simpleEq(14, "+", 8, 22)
        },
        {
          story: "‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÉ‡∏ö‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏°‡∏µ‡∏™‡πâ‡∏° 19 ‡∏ú‡∏• ‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏™‡πâ‡∏° 3 ‡∏ú‡∏• ‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏ú‡∏•?",
          eqLabel: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏• =",
          slots: simpleEq(19, "+", 3, 22)
        },
        {
          story: "‡∏´‡∏¥‡πâ‡∏á‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ä‡∏±‡πâ‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ 21 ‡πÄ‡∏•‡πà‡∏° ‡∏ä‡∏±‡πâ‡∏ô‡∏ö‡∏ô‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ä‡∏±‡πâ‡∏ô‡∏•‡πà‡∏≤‡∏á 5 ‡πÄ‡∏•‡πà‡∏° ‡∏ä‡∏±‡πâ‡∏ô‡∏ö‡∏ô‡∏°‡∏µ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏Å‡∏µ‡πà‡πÄ‡∏•‡πà‡∏°?",
          eqLabel: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ä‡∏±‡πâ‡∏ô‡∏ö‡∏ô =",
          slots: simpleEq(21, "+", 5, 26)
        },
        {
          story: "‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏°‡∏µ‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡∏™‡∏µ‡∏ü‡πâ‡∏≤ 17 ‡πÅ‡∏ó‡πà‡∏á ‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏™‡∏µ‡∏ü‡πâ‡∏≤ 6 ‡πÅ‡∏ó‡πà‡∏á ‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏°‡∏µ‡∏Å‡∏µ‡πà‡πÅ‡∏ó‡πà‡∏á?",
          eqLabel: "‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡∏™‡∏µ‡πÅ‡∏î‡∏á =",
          slots: simpleEq(17, "+", 6, 23)
        },
        {
          story: "‡∏™‡∏ô‡∏≤‡∏°‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏•‡πà‡∏ô‡∏°‡∏µ‡∏ä‡∏¥‡∏á‡∏ä‡πâ‡∏≤ 9 ‡∏≠‡∏±‡∏ô ‡∏°‡∏µ‡∏™‡πÑ‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ä‡∏¥‡∏á‡∏ä‡πâ‡∏≤ 7 ‡∏≠‡∏±‡∏ô ‡∏°‡∏µ‡∏™‡πÑ‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Å‡∏µ‡πà‡∏≠‡∏±‡∏ô?",
          eqLabel: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πÑ‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå =",
          slots: simpleEq(9, "+", 7, 16)
        }
      ],

      B: [
        {
          story: "‡πÅ‡∏°‡πà‡∏°‡∏µ‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ 24 ‡∏î‡∏≠‡∏Å ‡∏•‡∏π‡∏Å‡∏°‡∏µ‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÅ‡∏°‡πà 7 ‡∏î‡∏≠‡∏Å ‡∏•‡∏π‡∏Å‡∏°‡∏µ‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏Å‡∏µ‡πà‡∏î‡∏≠‡∏Å?",
          eqLabel: "‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å =",
          slots: simpleEq(24, "-", 7, 17)
        },
        {
          story: "‡∏û‡∏µ‡πà‡∏°‡∏µ‡∏•‡∏π‡∏Å‡∏≠‡∏° 19 ‡πÄ‡∏°‡πá‡∏î ‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏û‡∏µ‡πà 5 ‡πÄ‡∏°‡πá‡∏î ‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏•‡∏π‡∏Å‡∏≠‡∏°‡∏Å‡∏µ‡πà‡πÄ‡∏°‡πá‡∏î?",
          eqLabel: "‡∏•‡∏π‡∏Å‡∏≠‡∏°‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏á =",
          slots: simpleEq(19, "-", 5, 14)
        },
        {
          story: "‡πÉ‡∏ô‡∏™‡∏ß‡∏ô‡∏°‡∏µ‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠ 28 ‡∏ï‡∏±‡∏ß ‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏≤‡∏∞‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 10 ‡∏ï‡∏±‡∏ß ‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏≤‡∏∞‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß?",
          eqLabel: "‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏≤‡∏∞‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ =",
          slots: simpleEq(28, "-", 10, 18)
        },
        {
          story: "‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏°‡∏µ‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏™‡∏µ 30 ‡πÅ‡∏ó‡πà‡∏á ‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 12 ‡πÅ‡∏ó‡πà‡∏á ‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏°‡∏µ‡∏Å‡∏µ‡πà‡πÅ‡∏ó‡πà‡∏á?",
          eqLabel: "‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏™‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏à‡∏≥ =",
          slots: simpleEq(30, "-", 12, 18)
        },
        {
          story: "‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏î‡∏°‡∏µ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ 35 ‡πÄ‡∏•‡πà‡∏° ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 9 ‡πÄ‡∏•‡πà‡∏° ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏°‡∏µ‡∏Å‡∏µ‡πà‡πÄ‡∏•‡πà‡∏°?",
          eqLabel: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô =",
          slots: simpleEq(35, "-", 9, 26)
        },
        {
          story: "‡∏õ‡πâ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡πâ‡∏°‡∏°‡∏≤ 26 ‡∏ú‡∏• ‡∏™‡πâ‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏à‡∏Å‡πÄ‡∏î‡πá‡∏Å‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏™‡πâ‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 11 ‡∏ú‡∏• ‡∏õ‡πâ‡∏≤‡πÅ‡∏à‡∏Å‡∏™‡πâ‡∏°‡πÑ‡∏õ‡∏Å‡∏µ‡πà‡∏ú‡∏•?",
          eqLabel: "‡∏™‡πâ‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏à‡∏Å‡πÄ‡∏î‡πá‡∏Å =",
          slots: simpleEq(26, "-", 11, 15)
        },
        {
          story: "‡∏Ñ‡∏£‡∏π‡∏°‡∏µ‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤ 22 ‡πÅ‡∏ó‡πà‡∏á ‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏°‡∏∂‡∏Å‡∏≠‡∏¢‡∏π‡πà ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 6 ‡πÅ‡∏ó‡πà‡∏á ‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏°‡∏∂‡∏Å‡∏≠‡∏¢‡∏π‡πà‡∏°‡∏µ‡∏Å‡∏µ‡πà‡πÅ‡∏ó‡πà‡∏á?",
          eqLabel: "‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏°‡∏∂‡∏Å =",
          slots: simpleEq(22, "-", 6, 16)
        },
        {
          story: "‡∏´‡∏¥‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏°‡∏µ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå 18 ‡∏ï‡∏±‡∏ß ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 7 ‡∏ï‡∏±‡∏ß ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß?",
          eqLabel: "‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ =",
          slots: simpleEq(18, "-", 7, 11)
        },
        {
          story: "‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏°‡∏µ‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏• 25 ‡∏•‡∏π‡∏Å ‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 8 ‡∏•‡∏π‡∏Å ‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏•‡∏π‡∏Å?",
          eqLabel: "‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•‡∏™‡∏µ‡πÅ‡∏î‡∏á =",
          slots: simpleEq(25, "-", 8, 17)
        },
        {
          story: "‡∏£‡∏ñ‡∏ö‡∏±‡∏™‡∏£‡∏±‡∏ö‡πÄ‡∏î‡πá‡∏Å 32 ‡∏Ñ‡∏ô ‡πÄ‡∏î‡πá‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 14 ‡∏Ñ‡∏ô ‡πÄ‡∏î‡πá‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏µ‡πà‡∏Ñ‡∏ô?",
          eqLabel: "‡πÄ‡∏î‡πá‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤ =",
          slots: simpleEq(32, "-", 14, 18)
        }
      ],

      C: [
        {
          story: "‡πÉ‡∏ô‡∏™‡∏ß‡∏ô‡∏°‡∏µ‡πÅ‡∏°‡∏ß 16 ‡∏ï‡∏±‡∏ß ‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÅ‡∏°‡∏ß 7 ‡∏ï‡∏±‡∏ß ‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß?",
          eqLabel: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏∏‡∏ô‡∏±‡∏Ç =",
          slots: simpleEq(16, "+", 7, 23)
        },
        {
          story: "‡∏û‡∏µ‡πà‡∏°‡∏µ‡∏î‡∏¥‡∏ô‡∏™‡∏≠ 21 ‡πÅ‡∏ó‡πà‡∏á ‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏û‡∏µ‡πà 6 ‡πÅ‡∏ó‡πà‡∏á ‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏Å‡∏µ‡πà‡πÅ‡∏ó‡πà‡∏á?",
          eqLabel: "‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏á =",
          slots: simpleEq(21, "-", 6, 15)
        },
        {
          story: "‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏µ‡πÉ‡∏ö 30 ‡πÉ‡∏ö ‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÉ‡∏´‡∏ç‡πà 9 ‡πÉ‡∏ö ‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏°‡∏µ‡∏Å‡∏µ‡πà‡πÉ‡∏ö?",
          eqLabel: "‡πÉ‡∏ö‡∏Ç‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÄ‡∏•‡πá‡∏Å =",
          slots: simpleEq(30, "-", 9, 21)
        },
        {
          story: "‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏°‡∏µ‡πÇ‡∏ï‡πä‡∏∞‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 18 ‡∏ï‡∏±‡∏ß ‡πÇ‡∏ï‡πä‡∏∞‡∏Ñ‡∏£‡∏π‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÇ‡∏ï‡πä‡∏∞‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 15 ‡∏ï‡∏±‡∏ß ‡πÇ‡∏ï‡πä‡∏∞‡∏Ñ‡∏£‡∏π‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß?",
          eqLabel: "‡πÇ‡∏ï‡πä‡∏∞‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π =",
          slots: simpleEq(18, "-", 15, 3)
        },
        {
          story: "‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏°‡∏µ‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏£‡∏π‡∏õ‡∏î‡∏≤‡∏ß 14 ‡πÅ‡∏ú‡πà‡∏ô ‡∏£‡∏π‡∏õ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏£‡∏π‡∏õ‡∏î‡∏≤‡∏ß 5 ‡πÅ‡∏ú‡πà‡∏ô ‡∏£‡∏π‡∏õ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏°‡∏µ‡∏Å‡∏µ‡πà‡πÅ‡∏ú‡πà‡∏ô?",
          eqLabel: "‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏£‡∏π‡∏õ‡∏´‡∏±‡∏ß‡πÉ‡∏à =",
          slots: simpleEq(14, "+", 5, 19)
        },
        {
          story: "‡∏´‡πâ‡∏≠‡∏á A ‡∏°‡∏µ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 27 ‡∏Ñ‡∏ô ‡∏´‡πâ‡∏≠‡∏á B ‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏´‡πâ‡∏≠‡∏á A 4 ‡∏Ñ‡∏ô ‡∏´‡πâ‡∏≠‡∏á B ‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏Ñ‡∏ô?",
          eqLabel: "‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏´‡πâ‡∏≠‡∏á B =",
          slots: simpleEq(27, "+", 4, 31)
        },
        {
          story: "‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏ô‡∏°‡∏°‡∏µ‡πÄ‡∏Ñ‡πâ‡∏Å 22 ‡∏ä‡∏¥‡πâ‡∏ô ‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏Ñ‡πâ‡∏Å 8 ‡∏ä‡∏¥‡πâ‡∏ô ‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏ä‡∏¥‡πâ‡∏ô?",
          eqLabel: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á =",
          slots: simpleEq(22, "-", 8, 14)
        },
        {
          story: "‡∏°‡∏µ‡∏•‡∏π‡∏Å‡πÇ‡∏õ‡πà‡∏á‡∏™‡∏µ‡∏ü‡πâ‡∏≤ 19 ‡∏•‡∏π‡∏Å ‡∏•‡∏π‡∏Å‡πÇ‡∏õ‡πà‡∏á‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏™‡∏µ‡∏ü‡πâ‡∏≤ 6 ‡∏•‡∏π‡∏Å ‡∏•‡∏π‡∏Å‡πÇ‡∏õ‡πà‡∏á‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏•‡∏π‡∏Å?",
          eqLabel: "‡∏•‡∏π‡∏Å‡πÇ‡∏õ‡πà‡∏á‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π =",
          slots: simpleEq(19, "+", 6, 25)
        },
        {
          story: "‡∏Ñ‡∏£‡∏π‡∏°‡∏µ‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏™‡∏µ 25 ‡πÅ‡∏ó‡πà‡∏á ‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 7 ‡πÅ‡∏ó‡πà‡∏á ‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏Å‡∏µ‡πà‡πÅ‡∏ó‡πà‡∏á?",
          eqLabel: "‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏™‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ =",
          slots: simpleEq(25, "-", 7, 18)
        },
        {
          story: "‡πÉ‡∏ô‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô‡∏°‡∏µ‡∏ô‡∏°‡∏Å‡∏•‡πà‡∏≠‡∏á 17 ‡∏Å‡∏•‡πà‡∏≠‡∏á ‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏° 5 ‡∏Å‡∏•‡πà‡∏≠‡∏á ‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏Å‡∏•‡πà‡∏≠‡∏á?",
          eqLabel: "‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ =",
          slots: simpleEq(17, "+", 5, 22)
        }
      ],

      // Part D: 3 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î
      D: [
        {
          story: "‡πÅ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô 100 ‡∏ö‡∏≤‡∏ó ‡∏û‡πà‡∏≠‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÅ‡∏°‡πà 80 ‡∏ö‡∏≤‡∏ó ‡∏û‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÅ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏µ‡πà‡∏ö‡∏≤‡∏ó?",
          lines: [
            {
              label: "‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏°‡πà =",
              slots: [{ type: "num", correct: 100 }]
            },
            {
              label: "‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡πà‡∏≠ =",
              slots: [
                { type: "num", correct: 100 },
                { type: "op", correct: "+" },
                { type: "num", correct: 80 }
              ],
              answer: 180
            },
            {
              label: "‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÅ‡∏°‡πà‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô =",
              slots: [
                { type: "num", correct: 100 },
                { type: "op", correct: "+" },
                { type: "num", correct: 180 }
              ],
              answer: 280
            }
          ]
        },
        {
          story: "‡πÅ‡∏°‡πà‡∏°‡∏µ‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ 60 ‡∏î‡∏≠‡∏Å ‡∏¢‡∏≤‡∏¢‡∏°‡∏µ‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÅ‡∏°‡πà 15 ‡∏î‡∏≠‡∏Å ‡πÅ‡∏°‡πà‡∏Å‡∏±‡∏ö‡∏¢‡∏≤‡∏¢‡∏°‡∏µ‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏µ‡πà‡∏î‡∏≠‡∏Å?",
          lines: [
            {
              label: "‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏Ç‡∏≠‡∏á‡πÅ‡∏°‡πà =",
              slots: [{ type: "num", correct: 60 }]
            },
            {
              label: "‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏Ç‡∏≠‡∏á‡∏¢‡∏≤‡∏¢ =",
              slots: [
                { type: "num", correct: 60 },
                { type: "op", correct: "-" },
                { type: "num", correct: 15 }
              ],
              answer: 45
            },
            {
              label: "‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏Ç‡∏≠‡∏á‡πÅ‡∏°‡πà‡∏Å‡∏±‡∏ö‡∏¢‡∏≤‡∏¢‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô =",
              slots: [
                { type: "num", correct: 60 },
                { type: "op", correct: "+" },
                { type: "num", correct: 45 }
              ],
              answer: 105
            }
          ]
        },
        {
          story: "‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏°‡∏µ‡∏•‡∏π‡∏Å‡∏≠‡∏°‡∏Ç‡∏≠‡∏á‡∏û‡∏µ‡πà 40 ‡πÄ‡∏°‡πá‡∏î ‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏•‡∏π‡∏Å‡∏≠‡∏°‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏û‡∏µ‡πà 25 ‡πÄ‡∏°‡πá‡∏î ‡∏û‡∏µ‡πà‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏•‡∏π‡∏Å‡∏≠‡∏°‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏µ‡πà‡πÄ‡∏°‡πá‡∏î?",
          lines: [
            {
              label: "‡∏•‡∏π‡∏Å‡∏≠‡∏°‡∏Ç‡∏≠‡∏á‡∏û‡∏µ‡πà =",
              slots: [{ type: "num", correct: 40 }]
            },
            {
              label: "‡∏•‡∏π‡∏Å‡∏≠‡∏°‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏á =",
              slots: [
                { type: "num", correct: 40 },
                { type: "op", correct: "+" },
                { type: "num", correct: 25 }
              ],
              answer: 65
            },
            {
              label: "‡∏•‡∏π‡∏Å‡∏≠‡∏°‡∏Ç‡∏≠‡∏á‡∏û‡∏µ‡πà‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≠‡∏á‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô =",
              slots: [
                { type: "num", correct: 40 },
                { type: "op", correct: "+" },
                { type: "num", correct: 65 }
              ],
              answer: 105
            }
          ]
        },
        {
          story: "‡∏û‡πà‡∏≠‡∏°‡∏µ‡∏î‡∏¥‡∏ô‡∏™‡∏≠ 35 ‡πÅ‡∏ó‡πà‡∏á ‡∏•‡∏π‡∏Å‡∏°‡∏µ‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏û‡πà‡∏≠ 12 ‡πÅ‡∏ó‡πà‡∏á ‡∏û‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏°‡∏µ‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏µ‡πà‡πÅ‡∏ó‡πà‡∏á?",
          lines: [
            {
              label: "‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏Ç‡∏≠‡∏á‡∏û‡πà‡∏≠ =",
              slots: [{ type: "num", correct: 35 }]
            },
            {
              label: "‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å =",
              slots: [
                { type: "num", correct: 35 },
                { type: "op", correct: "-" },
                { type: "num", correct: 12 }
              ],
              answer: 23
            },
            {
              label: "‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏Ç‡∏≠‡∏á‡∏û‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô =",
              slots: [
                { type: "num", correct: 35 },
                { type: "op", correct: "+" },
                { type: "num", correct: 23 }
              ],
              answer: 58
            }
          ]
        },
        {
          story: "‡πÉ‡∏ô‡∏™‡∏ß‡∏ô‡∏°‡∏µ‡πÅ‡∏°‡∏ß 18 ‡∏ï‡∏±‡∏ß ‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÅ‡∏°‡∏ß 9 ‡∏ï‡∏±‡∏ß ‡πÅ‡∏°‡∏ß‡∏Å‡∏±‡∏ö‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß?",
          lines: [
            {
              label: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏°‡∏ß =",
              slots: [{ type: "num", correct: 18 }]
            },
            {
              label: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏∏‡∏ô‡∏±‡∏Ç =",
              slots: [
                { type: "num", correct: 18 },
                { type: "op", correct: "+" },
                { type: "num", correct: 9 }
              ],
              answer: 27
            },
            {
              label: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏°‡∏ß‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô =",
              slots: [
                { type: "num", correct: 18 },
                { type: "op", correct: "+" },
                { type: "num", correct: 27 }
              ],
              answer: 45
            }
          ]
        },
        {
          story: "‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏î‡∏°‡∏µ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π 55 ‡πÄ‡∏•‡πà‡∏° ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π 20 ‡πÄ‡∏•‡πà‡∏° ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π‡∏Å‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏µ‡πà‡πÄ‡∏•‡πà‡∏°?",
          lines: [
            {
              label: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π =",
              slots: [{ type: "num", correct: 55 }]
            },
            {
              label: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô =",
              slots: [
                { type: "num", correct: 55 },
                { type: "op", correct: "-" },
                { type: "num", correct: 20 }
              ],
              answer: 35
            },
            {
              label: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π‡∏Å‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô =",
              slots: [
                { type: "num", correct: 55 },
                { type: "op", correct: "+" },
                { type: "num", correct: 35 }
              ],
              answer: 90
            }
          ]
        },
        {
          story: "‡∏£‡πâ‡∏≤‡∏ô‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏°‡∏µ‡∏™‡πâ‡∏° 30 ‡∏ú‡∏• ‡∏°‡∏µ‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏™‡πâ‡∏° 16 ‡∏ú‡∏• ‡∏™‡πâ‡∏°‡∏Å‡∏±‡∏ö‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏µ‡πà‡∏ú‡∏•?",
          lines: [
            {
              label: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πâ‡∏° =",
              slots: [{ type: "num", correct: 30 }]
            },
            {
              label: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏• =",
              slots: [
                { type: "num", correct: 30 },
                { type: "op", correct: "+" },
                { type: "num", correct: 16 }
              ],
              answer: 46
            },
            {
              label: "‡∏™‡πâ‡∏°‡πÅ‡∏•‡∏∞‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô =",
              slots: [
                { type: "num", correct: 30 },
                { type: "op", correct: "+" },
                { type: "num", correct: 46 }
              ],
              answer: 76
            }
          ]
        },
        {
          story: "‡∏û‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå 70 ‡πÅ‡∏ú‡πà‡∏ô ‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏û‡∏µ‡πà 25 ‡πÅ‡∏ú‡πà‡∏ô ‡∏û‡∏µ‡πà‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏µ‡πà‡πÅ‡∏ú‡πà‡∏ô?",
          lines: [
            {
              label: "‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏û‡∏µ‡πà =",
              slots: [{ type: "num", correct: 70 }]
            },
            {
              label: "‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏á =",
              slots: [
                { type: "num", correct: 70 },
                { type: "op", correct: "-" },
                { type: "num", correct: 25 }
              ],
              answer: 45
            },
            {
              label: "‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏û‡∏µ‡πà‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≠‡∏á‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô =",
              slots: [
                { type: "num", correct: 70 },
                { type: "op", correct: "+" },
                { type: "num", correct: 45 }
              ],
              answer: 115
            }
          ]
        },
        {
          story: "‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏°‡∏µ‡πÇ‡∏ï‡πä‡∏∞‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ä‡∏±‡πâ‡∏ô‡∏•‡πà‡∏≤‡∏á 45 ‡∏ï‡∏±‡∏ß ‡∏ä‡∏±‡πâ‡∏ô‡∏ö‡∏ô‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ä‡∏±‡πâ‡∏ô‡∏•‡πà‡∏≤‡∏á 18 ‡∏ï‡∏±‡∏ß ‡πÇ‡∏ï‡πä‡∏∞‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ä‡∏±‡πâ‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ä‡∏±‡πâ‡∏ô‡∏ö‡∏ô‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß?",
          lines: [
            {
              label: "‡πÇ‡∏ï‡πä‡∏∞‡∏ä‡∏±‡πâ‡∏ô‡∏•‡πà‡∏≤‡∏á =",
              slots: [{ type: "num", correct: 45 }]
            },
            {
              label: "‡πÇ‡∏ï‡πä‡∏∞‡∏ä‡∏±‡πâ‡∏ô‡∏ö‡∏ô =",
              slots: [
                { type: "num", correct: 45 },
                { type: "op", correct: "+" },
                { type: "num", correct: 18 }
              ],
              answer: 63
            },
            {
              label: "‡πÇ‡∏ï‡πä‡∏∞‡∏ä‡∏±‡πâ‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ä‡∏±‡πâ‡∏ô‡∏ö‡∏ô‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô =",
              slots: [
                { type: "num", correct: 45 },
                { type: "op", correct: "+" },
                { type: "num", correct: 63 }
              ],
              answer: 108
            }
          ]
        },
        {
          story: "‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏°‡∏µ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå 22 ‡∏ï‡∏±‡∏ß ‡∏ï‡∏∏‡πä‡∏Å‡∏ï‡∏≤‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå 6 ‡∏ï‡∏±‡∏ß ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏Å‡∏±‡∏ö‡∏ï‡∏∏‡πä‡∏Å‡∏ï‡∏≤‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß?",
          lines: [
            {
              label: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå =",
              slots: [{ type: "num", correct: 22 }]
            },
            {
              label: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏∏‡πä‡∏Å‡∏ï‡∏≤ =",
              slots: [
                { type: "num", correct: 22 },
                { type: "op", correct: "-" },
                { type: "num", correct: 6 }
              ],
              answer: 16
            },
            {
              label: "‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡πÅ‡∏•‡∏∞‡∏ï‡∏∏‡πä‡∏Å‡∏ï‡∏≤‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô =",
              slots: [
                { type: "num", correct: 22 },
                { type: "op", correct: "+" },
                { type: "num", correct: 16 }
              ],
              answer: 38
            }
          ]
        }
      ]
    };

    // -------------------------
    // STATE
    // -------------------------
    let currentPart = null;
    let currentIndex = 0;
    let currentQuestions = [];
    let currentSlots = [];
    let selectedSlotIndex = null;
    let attempts = 0;
    let score = 0;
    let studentName = "";

    // -------------------------
    // DOM
    // -------------------------
    const startScreen = document.getElementById("start-screen");
    const gameScreen = document.getElementById("game-screen");
    const partButtons = Array.from(document.querySelectorAll(".part-btn"));
    const startBtn = document.getElementById("start-btn");
    const studentNameInput = document.getElementById("student-name");

    const nameDisplay = document.getElementById("name-display");
    const partDisplay = document.getElementById("part-display");
    const scoreDisplay = document.getElementById("score-display");
    const questionText = document.getElementById("question-text");
    const equationArea = document.getElementById("equation-area");

    const messageArea = document.getElementById("message-area");
    const backHomeBtn = document.getElementById("back-home-btn");
    const checkBtn = document.getElementById("check-btn");
    const nextBtn = document.getElementById("next-btn");

    const keypadButtons = Array.from(document.querySelectorAll(".key-btn"));
    const clearSlotBtn = document.getElementById("clear-slot");
    const clearAllBtn = document.getElementById("clear-all");

    // -------------------------
    // Helpers
    // -------------------------
    function updateStartButtonState() {
      const nameFilled = studentNameInput.value.trim().length > 0;
      const partChosen = !!currentPart;
      startBtn.disabled = !(nameFilled && partChosen);
    }

    function setMessage(text, emoji) {
      messageArea.innerHTML = "";
      if (emoji) {
        const spanEmoji = document.createElement("span");
        spanEmoji.className = "emoji";
        spanEmoji.textContent = emoji;
        messageArea.appendChild(spanEmoji);
      }
      const spanText = document.createElement("span");
      spanText.textContent = text || "";
      messageArea.appendChild(spanText);
    }

    function launchConfetti() {
      const count = 60;
      for (let i = 0; i < count; i++) {
        const piece = document.createElement("div");
        piece.className = "confetti-piece";
        const startX = Math.random() * 100;
        const endX = startX + (Math.random() * 40 - 20);
        piece.style.setProperty("--x-start", startX + "vw");
        piece.style.setProperty("--x-end", endX + "vw");
        const colors = ["#ffeb3b", "#ff4081", "#40c4ff", "#b388ff", "#69f0ae"];
        piece.style.background = colors[Math.floor(Math.random() * colors.length)];
        document.body.appendChild(piece);
        setTimeout(() => piece.remove(), 1500);
      }
    }

    function renderScore() {
      scoreDisplay.textContent = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${score}/${currentIndex + 1}`;
    }

    function clearSelectionHighlight() {
      const allSlots = equationArea.querySelectorAll(".slot");
      allSlots.forEach(s => s.classList.remove("selected"));
    }

    function setSlotsDisabled(disabled) {
      const allSlots = equationArea.querySelectorAll(".slot");
      allSlots.forEach(s => {
        if (disabled) {
          s.classList.add("disabled");
        } else {
          s.classList.remove("disabled");
        }
      });
    }

    function renderQuestion() {
      const q = currentQuestions[currentIndex];
      selectedSlotIndex = null;
      attempts = 0;
      currentSlots = [];
      questionText.textContent = q.story;
      equationArea.innerHTML = "";

      if (q.lines && Array.isArray(q.lines)) {
        // ---------- Part D: ‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î ----------
        q.lines.forEach((line) => {
          const row = document.createElement("div");
          row.className = "equation-row";

          const labelDiv = document.createElement("div");
          labelDiv.className = "equation-line-label";
          labelDiv.textContent = line.label;
          row.appendChild(labelDiv);

          const slotsWrap = document.createElement("div");
          slotsWrap.className = "equation-line-slots";

          line.slots.forEach((slotDef) => {
            const idx = currentSlots.length;
            currentSlots.push({ ...slotDef, value: "" });

            const div = document.createElement("div");
            if (slotDef.type === "op") {
              div.className = "circle-slot slot";
            } else {
              div.className = "square-slot slot";
            }
            div.dataset.index = idx;
            div.textContent = "";
            div.addEventListener("click", () => {
              if (div.classList.contains("disabled")) return;
              selectedSlotIndex = idx;
              clearSelectionHighlight();
              div.classList.add("selected");
              playClickSound(520);
            });

            slotsWrap.appendChild(div);
          });

          if (typeof line.answer === "number") {
            const eqSpan = document.createElement("span");
            eqSpan.className = "slot-label";
            eqSpan.textContent = "=";
            slotsWrap.appendChild(eqSpan);

            const ansIdx = currentSlots.length;
            currentSlots.push({ type: "ans", correct: line.answer, value: "" });

            const ansDiv = document.createElement("div");
            ansDiv.className = "square-slot answer-slot slot";
            ansDiv.dataset.index = ansIdx;
            ansDiv.textContent = "";
            ansDiv.addEventListener("click", () => {
              if (ansDiv.classList.contains("disabled")) return;
              selectedSlotIndex = ansIdx;
              clearSelectionHighlight();
              ansDiv.classList.add("selected");
              playClickSound(520);
            });

            slotsWrap.appendChild(ansDiv);
          }

          row.appendChild(slotsWrap);
          equationArea.appendChild(row);
        });
      } else {
        // ---------- Part A‚ÄìC: 1 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏£‡∏∏‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏°‡∏Å‡∏≤‡∏£ ----------
        currentSlots = q.slots.map(s => ({ ...s, value: "" }));

        const row = document.createElement("div");
        row.className = "equation-row";

        const labelDiv = document.createElement("div");
        labelDiv.className = "equation-line-label";
        labelDiv.textContent = q.eqLabel || "";
        row.appendChild(labelDiv);

        const slotsWrap = document.createElement("div");
        slotsWrap.className = "equation-line-slots";

        currentSlots.forEach((slot, idx) => {
          // ‡∏Å‡πà‡∏≠‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà " = "
          if (slot.type === "ans") {
            const eqSpan = document.createElement("span");
            eqSpan.className = "slot-label";
            eqSpan.textContent = "=";
            slotsWrap.appendChild(eqSpan);
          }

          const div = document.createElement("div");
          if (slot.type === "op") {
            div.className = "circle-slot slot";
          } else if (slot.type === "ans") {
            div.className = "square-slot answer-slot slot";
          } else {
            div.className = "square-slot slot";
          }
          div.dataset.index = idx;
          div.textContent = "";
          div.addEventListener("click", () => {
            if (div.classList.contains("disabled")) return;
            selectedSlotIndex = idx;
            clearSelectionHighlight();
            div.classList.add("selected");
            playClickSound(520);
          });

          slotsWrap.appendChild(div);
        });

        row.appendChild(slotsWrap);
        equationArea.appendChild(row);
      }

      setSlotsDisabled(false);
      renderScore();
      setMessage("‡∏•‡∏≠‡∏á‡∏≠‡πà‡∏≤‡∏ô‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏ô‡∏∞‡∏à‡πä‡∏∞ üíú", "üìù");
    }

    function fillSlotsWithCorrectAnswer() {
      const slotDivs = equationArea.querySelectorAll(".slot");
      slotDivs.forEach(div => {
        const idx = Number(div.dataset.index);
        const slot = currentSlots[idx];
        if (!slot) return;
        if (slot.type === "num" || slot.type === "ans") {
          div.textContent = slot.correct;
          slot.value = String(slot.correct);
        } else if (slot.type === "op") {
          div.textContent = slot.correct;
          slot.value = slot.correct;
        }
      });
    }

    function checkAnswer() {
      playClickSound(440);

      // 1) ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏£‡∏¥‡∏á ‡πÜ
      for (let i = 0; i < currentSlots.length; i++) {
        const slot = currentSlots[i];
        if (!slot) continue;

        // (‡∏Å‡∏±‡∏ô‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ type eq ‡πÅ‡∏ï‡πà‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏•‡πâ‡∏ß)
        if (slot.type === "eq") continue;

        const div = equationArea.querySelector(`.slot[data-index="${i}"]`);
        const val = div ? (div.textContent || "").trim() : "";

        if (!val) {
          setMessage("‡∏•‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏à‡πä‡∏∞ ‚úèÔ∏è", "üôÇ");
          return;
        }
      }

      // 2) ‡∏ï‡∏£‡∏ß‡∏à‡∏ñ‡∏π‡∏Å/‡∏ú‡∏¥‡∏î
      let allCorrect = true;

      for (let i = 0; i < currentSlots.length; i++) {
        const slot = currentSlots[i];
        if (!slot) continue;
        if (slot.type === "eq") continue;

        const div = equationArea.querySelector(`.slot[data-index="${i}"]`);
        const val = (div.textContent || "").trim();
        currentSlots[i].value = val;

        if (slot.type === "num" || slot.type === "ans") {
          const target = Number(slot.correct);
          const userVal = Number(val);
          if (userVal !== target) {
            allCorrect = false;
          }
        } else if (slot.type === "op") {
          if (val !== slot.correct) {
            allCorrect = false;
          }
        }
      }

      if (allCorrect) {
        score++;
        renderScore();
        launchConfetti();
        setMessage("‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å! Wowwww! üéâ", "üòä");
        setSlotsDisabled(true);
      } else {
        attempts++;
        if (attempts === 1) {
          setMessage("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á ‡∏•‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÑ‡∏î‡πâ‡∏ô‡∏∞ üí™", "üòÖ");
        } else {
          fillSlotsWithCorrectAnswer();
          setSlotsDisabled(true);
          setMessage("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ô‡∏∞‡∏à‡πä‡∏∞ ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏â‡∏•‡∏¢‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á üåü", "üìò");
        }
      }
    }

    function goToNextQuestion() {
      playClickSound(500);
      if (currentIndex < currentQuestions.length - 1) {
        currentIndex++;
        renderQuestion();
      } else {
        setMessage(
          `‡∏à‡∏ö Part ‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß! ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ${score}/${currentQuestions.length} ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢ üéâ`,
          "üèÜ"
        );
        setSlotsDisabled(true);
      }
    }

    function resetAllSlots() {
      const slotDivs = equationArea.querySelectorAll(".slot");
      slotDivs.forEach(div => {
        if (!div.classList.contains("disabled")) {
          div.textContent = "";
        }
      });
      currentSlots = currentSlots.map(s => s ? { ...s, value: "" } : s);
      attempts = 0;
      setSlotsDisabled(false);
      setMessage("‡∏•‡∏≠‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞ ‚úèÔ∏è", "üîÅ");
    }

    // -------------------------
    // Events
    // -------------------------

    partButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        playClickSound();
        partButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        currentPart = btn.dataset.part;
        updateStartButtonState();
      });
    });

    studentNameInput.addEventListener("input", updateStartButtonState);

    startBtn.addEventListener("click", () => {
      playClickSound();
      studentName = studentNameInput.value.trim() || "‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô";
      currentQuestions = questionsByPart[currentPart];
      currentIndex = 0;
      score = 0;

      nameDisplay.textContent = `üëß ‡∏ä‡∏∑‡πà‡∏≠: ${studentName}`;
      partDisplay.textContent = `Part ${currentPart}`;
      scoreDisplay.textContent = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: 0/1`;

      startScreen.style.display = "none";
      gameScreen.style.display = "block";

      renderQuestion();
    });

    backHomeBtn.addEventListener("click", () => {
      playClickSound();
      gameScreen.style.display = "none";
      startScreen.style.display = "block";
      setMessage("", "");
      partButtons.forEach(b => b.classList.remove("active"));
      currentPart = null;
      updateStartButtonState();
    });

    checkBtn.addEventListener("click", () => {
      checkAnswer();
    });

    nextBtn.addEventListener("click", () => {
      goToNextQuestion();
    });

    keypadButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const key = btn.dataset.key;
        if (!key) return;
        playClickSound(700);

        if (selectedSlotIndex === null) {
          setMessage("‡πÅ‡∏ï‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏à‡πä‡∏∞ üí°", "üëâ");
          return;
        }

        const slot = currentSlots[selectedSlotIndex];
        const div = equationArea.querySelector(
          `.slot[data-index="${selectedSlotIndex}"]`
        );
        if (!slot || !div || div.classList.contains("disabled")) return;

        if (slot.type === "op") {
          if (key === "+" || key === "-") {
            div.textContent = key;
          }
        } else if (slot.type === "num" || slot.type === "ans") {
          if (/[0-9]/.test(key)) {
            const currentText = (div.textContent || "").trim();
            if (currentText.length >= 3) return;
            div.textContent = currentText + key;
          }
        }
      });
    });

    clearSlotBtn.addEventListener("click", () => {
      playClickSound(400);
      if (selectedSlotIndex === null) {
        setMessage("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏Å‡∏î‡∏•‡∏ö‡∏ô‡∏∞‡∏à‡πä‡∏∞ üßΩ", "üßº");
        return;
      }
      const div = equationArea.querySelector(
        `.slot[data-index="${selectedSlotIndex}"]`
      );
      if (div && !div.classList.contains("disabled")) {
        div.textContent = "";
      }
    });

    clearAllBtn.addEventListener("click", () => {
      playClickSound(360);
      resetAllSlots();
    });
  </script>
</body>
</html>
